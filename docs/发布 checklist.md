# âœ… ç‰ˆæœ¬å‘å¸ƒæµç¨‹ Checklist

> æœ¬æ–‡æ¡£ç”¨äºè§„èŒƒåŒ–ç‰ˆæœ¬å‘å¸ƒæµç¨‹ï¼Œç¡®ä¿æ¯æ¬¡å‘å¸ƒéƒ½**ä¸€è‡´ã€å¯å®¡è®¡ã€å¯è¿½æº¯**  
> å½“å‰é¡¹ç›®ç‰ˆæœ¬ç®¡ç†æ–¹æ¡ˆåŸºäºï¼š
> - [`bump2version`](https://github.com/c4urself/bump2version)ï¼šç‰ˆæœ¬å·æ§åˆ¶
> - è‡ªå®šä¹‰è„šæœ¬ `bump.py`ï¼šè‡ªåŠ¨å°è£…ç‰ˆæœ¬æ›´æ–°ã€changelog ç”Ÿæˆã€tag åˆ›å»ºã€git æäº¤
> - [`git-cliff`](https://github.com/orhun/git-cliff)ï¼šè‡ªåŠ¨ç”Ÿæˆ changelog
> - ç‰ˆæœ¬å·éµå¾ª [Semantic Versioning 2.0.0](https://semver.org/lang/zh-CN/)

---

## ğŸ“¦ å‡†å¤‡å‘å¸ƒ

### âœ… 1. ç¡®ä¿ä¸»åˆ†æ”¯æ˜¯å¹²å‡€çš„

- åˆ†æ”¯åˆ‡æ¢è‡³ä¸»åˆ†æ”¯ï¼ˆå¦‚ `main` æˆ– `master`ï¼‰ï¼š
  ```bash
  git checkout main
  git pull origin main
  ```
- æ‰€æœ‰å¾…å‘å¸ƒçš„åŠŸèƒ½å·²åˆå¹¶è¿›ä¸»åˆ†æ”¯
- æœ¬åœ°æ— æœªæäº¤æ›´æ”¹ï¼ˆ`git status` åº”ä¸ºç©ºï¼‰

---

## ğŸ§° 2. è¿è¡Œå‘å¸ƒè„šæœ¬ bump.py

ä½¿ç”¨å°è£…å¥½çš„è„šæœ¬è‡ªåŠ¨å®Œæˆä»¥ä¸‹å†…å®¹ï¼š

- æ›´æ–°ç‰ˆæœ¬å·ï¼ˆä¿®æ”¹ `pyproject.toml`ã€`.bumpversion.cfg`ã€`core/__init__.py` ç­‰ï¼‰
- åŒæ­¥ `uv.lock` ä¸­çš„ç‰ˆæœ¬å…ƒä¿¡æ¯
- è‡ªåŠ¨ç”Ÿæˆ `CHANGELOG.md`ï¼ˆè°ƒç”¨ `git-cliff`ï¼‰
- ä½¿ç”¨è§„èŒƒåŒ–æ ¼å¼æäº¤å˜æ›´
- è‡ªåŠ¨æ‰“ Git tagï¼ˆå¦‚ `v1.2.4`ï¼‰

### ğŸ¯ å‘½ä»¤ç¤ºä¾‹ï¼š

```bash
python -m utils.bump patch --commit --tag --changelog
```

æˆ–ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬çº§åˆ«ï¼ˆmajor / minor / pre-releaseï¼‰ï¼š

```bash
python -m utils.bump minor --commit --tag --changelog
python -m utils.bump alpha --commit --tag
```

---

## ğŸ“œ 3. è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹

### âœ… æäº¤ä¿¡æ¯æ ¼å¼ï¼š

```
chore(release): ç‰ˆæœ¬æ›´æ–° v1.2.3 â†’ v1.2.4
```

### âœ… æ›´æ–°çš„æ–‡ä»¶åŒ…æ‹¬ï¼š

- `pyproject.toml`ï¼šç‰ˆæœ¬å·
- `core/__init__.py`ï¼š`__version__`
- `.bumpversion.cfg`ï¼šcurrent_version
- `uv.lock`ï¼šå…ƒä¿¡æ¯ version
- `CHANGELOG.md`ï¼šæ ¹æ® git æäº¤å†å²ç”Ÿæˆï¼ˆåˆ†ç»„ï¼‰

---

## ğŸ·ï¸ 4. Git tag è‡ªåŠ¨ç”Ÿæˆ

- ç”Ÿæˆæ ¼å¼ä¸º `v1.2.4`
- tag åˆ›å»ºåœ¨ä¸»åˆ†æ”¯æœ€æ–°æäº¤ä¸Š
- å¯ç”¨äº CI/CD æ„å»ºä¸å‘å¸ƒæµç¨‹è§¦å‘å™¨

---

## â˜ï¸ 5. æ¨é€æäº¤ä¸ tag

å®Œæˆå˜æ›´åï¼Œç»Ÿä¸€æ¨é€ä»£ç å’Œ tagï¼š

```bash
git push origin main --tags
```

---

## ğŸ§ª 6. åç»­éªŒè¯

- CI/CD ä¼šç›‘å¬ tag æ¨é€å¹¶è§¦å‘æ„å»º
- å¯åœ¨ Git å¹³å°ï¼ˆå¦‚ Giteaã€GitHubï¼‰ä¸­éªŒè¯ï¼š
    - tag æ˜¯å¦å­˜åœ¨
    - changelog æ˜¯å¦æ­£ç¡®
    - changelog æ®µè½æ˜¯å¦åŒ¹é…è¯¥ç‰ˆæœ¬

---

## ğŸ”’ 7. æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ

| é¡¹ç›®                  | è¯´æ˜                             |
|---------------------|--------------------------------|
| tag å¿…é¡»åœ¨ä¸»åˆ†æ”¯ä¸Šåˆ›å»º       | é¿å… tag æŒ‡å‘ä¸´æ—¶æˆ–æœªå‘å¸ƒçš„æäº¤             |
| ç‰ˆæœ¬å·åº”ä¸ changelog å¯¹åº”  | ç”Ÿæˆæ—¥å¿—å‰ç¡®ä¿ `git log` åŒ…å«å®Œæ•´æäº¤       |
| commit message éµå¾ªè§„èŒƒ | `chore(release): ç‰ˆæœ¬æ›´æ–° vX â†’ vY` |
| æ¯æ¬¡å‘å¸ƒéƒ½ bump          | é¿å…é‡å¤ä½¿ç”¨æ—§ç‰ˆæœ¬å·                     |
| å°† `uv.lock` çº³å…¥ Git  | ä¿è¯ä¾èµ–ç‰ˆæœ¬ä¸€è‡´ï¼Œé¿å…æ„å»ºæ¼‚ç§»                |

---

## âœ… å‚è€ƒå‘½ä»¤é€ŸæŸ¥è¡¨

| æ“ä½œ               | å‘½ä»¤                                                        |
|------------------|-----------------------------------------------------------|
| å¢åŠ è¡¥ä¸ç‰ˆæœ¬           | `python -m utils.bump patch --commit --tag --changelog`   |
| å¢åŠ æ¬¡ç‰ˆæœ¬            | `python -m utils.bump minor --commit --tag --changelog`   |
| å‘å¸ƒæ­£å¼ç‰ˆï¼ˆç§»é™¤ pre æ ‡ç­¾ï¼‰ | `python -m utils.bump release --commit --tag --changelog` |
| æ·»åŠ é¢„å‘å¸ƒæ ‡ç­¾          | `python -m utils.bump rc --commit --tag`                  |
| ä»…æŸ¥çœ‹å½“å‰ç‰ˆæœ¬          | `python -m utils.bump info`                               |

---

## âœ… æ¨èå·¥å…·ç‰ˆæœ¬ä¾èµ–

| å·¥å…·             | æ¨èå®‰è£…æ–¹å¼                                     |
|----------------|--------------------------------------------|
| `bump2version` | `uv add bump2version`                      |
| `git-cliff`    | ä¸‹è½½äºŒè¿›åˆ¶æˆ–ä½¿ç”¨ `cargo install git-cliff`         |
| `uv`           | ç”¨äºä¾èµ–ç®¡ç†ä¸ lock æ›´æ–°                            |
| `tomli`        | Python è§£æ pyproject.tomlï¼ˆPython < 3.11 å¿…è£…ï¼‰ |
